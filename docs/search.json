[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "QGIS Plugin 開発",
    "section": "",
    "text": "このサイトでは、QGIS の Plugin を開発するための情報を提供しています。\n\nhttps://docs.qgis.org/3.34/ja/docs/pyqgis_developer_cookbook/plugins/index.html\nGIS実習オープン教材\n\nhttps://gis-oer.github.io/gitbook/book/materials/python/10/10.html\nhttps://gis-oer.github.io/gitbook/book/materials/python/11/11.html"
  },
  {
    "objectID": "about.html#はじめに",
    "href": "about.html#はじめに",
    "title": "2  はじめに",
    "section": "2.1 はじめに",
    "text": "2.1 はじめに\nこのサイトは、"
  },
  {
    "objectID": "about.html#参考",
    "href": "about.html#参考",
    "title": "2  はじめに",
    "section": "2.2 参考",
    "text": "2.2 参考\n\nhttps://docs.qgis.org/3.34/ja/docs/pyqgis_developer_cookbook/plugins/index.html\nGIS実習オープン教材\n\nhttps://gis-oer.github.io/gitbook/book/materials/python/10/10.html\nhttps://gis-oer.github.io/gitbook/book/materials/python/11/11.html"
  },
  {
    "objectID": "about.html#ライセンス",
    "href": "about.html#ライセンス",
    "title": "2  はじめに",
    "section": "2.3 ライセンス",
    "text": "2.3 ライセンス\nLicense: CC BY SA"
  },
  {
    "objectID": "about.html#著者について",
    "href": "about.html#著者について",
    "title": "2  はじめに",
    "section": "2.4 著者について",
    "text": "2.4 著者について\nAuthor: Yoshihiko Bbaa\nhttps://orcid.org/0000-0001-7034-9724\nhttps://plugins.qgis.org/plugins/author/Yoshihiko%2520Baba/\nhttps://github.com/babayoshihiko"
  },
  {
    "objectID": "flow.html#必須",
    "href": "flow.html#必須",
    "title": "3  一連の流れ",
    "section": "3.1 必須",
    "text": "3.1 必須\n\n\n\n\n\n\n\n\n\nアプリ\nmacOS\nWin\nOSGeo4W\n\n\n\n\nQGIS plugin\n/Users/username/Library/Application Support/QGIS/QGIS3/profiles/default/python/plugins\n右に同じ\nC:\\Users\\username\\AppData\\Roaming\\QGIS\\QGIS3\\profiles\\default\\python\n\n\npython\n/Applications/QGIS-LTR.app/Contents/MacOS/bin/python3\nC:\\Program Files\\apps\\Python39\\python3.exe\nC:\\OSGeo4W\\apps\\Python312\\python3.exe\n\n\npyrcc\n/Applications/QGIS-LTR.app/Contents/MacOS/bin/pyrcc5\nC:\\Program Files\\apps\\Python312\\Scripts\\pyrcc5.exe\nC:\\OSGeo4W\\apps\\Python39\\Scripts\\pyrcc5.exe\n\n\nDesigner\n/Applications/QGIS-LTR.app/Contents/MacOS/Designer.app\nC:\\Program Files\\apps\\Python312\\Scripts\\pylupdate5.exe\nC:\\OSGeo4W\\apps\\Python39\\Scripts\\pylupdate5.exe\n\n\nLinguist\n/Applications/QGIS-LTR.app/Contents/Resources/python/site-packages/qt5_applications/Qt/bin/Linguist.app\nC:\\Program Files\\apps\\Qt5\\bin\\linguist.exe\nC:\\OSGeo4W\\apps\\Qt5\\bin\\linguist.exe\n\n\n\n\n3.1.1 macOS\npyrcc と pylupdate は、一行目を書き換える必要があります。\n#!/Applications/QGIS-LTR.app/Contents/MacOS/QGIS\nを\n#!/Applications/QGIS-LTR.app/Contents/MacOS/bin/python3\nと書き換えます。\n上記のようではなく、/Applications/QGIS-LTR.app/Contents/MacOS/bin/pyrcc5 が\n#!/bin/sh\nexec '`dirname $0`/python3.9' -m PyQt5.pyrcc_main ${1+\"$@\"}\nであれば、\n#!/bin/sh\nexec '/Applications/QGIS-LTR.app/Contents/MacOS/bin/python3.9' -m PyQt5.pyrcc_main ${1+\"$@\"}\nあるいは、/Applications/QGIS-LTR.app/Contents/MacOS/bin/pylupdate5 は\n#!/bin/sh\nexec '`dirname $0`/python3.9' -m PyQt5.pylupdate_main ${1+\"$@\"}\nであれば\n#!/bin/sh\nexec '/Applications/QGIS-LTR.app/Contents/MacOS/bin/python3.9' -m PyQt5.pylupdate_main ${1+\"$@\"}\nと書き換えます。\n\n\n3.1.2 Windows\nWindows では、pyrcc と pylupdate を使う直前に qt5 や python3 の環境を読み込ませることで解決できます。\nスタンドアロン版の場合\n> call C:\\Program Files\\QGIS 3.38.2\\bin\\o4w_env.bat\n> C:\\Program Files\\QGIS 3.38.2\\apps\\Python312\\Scripts\\pyrcc5.exe -o resources.py resources.qrc\nOSGeo4W 版の場合\n> call C:\\OSGeo4W\\bin\\o4w_env.bat\n> C:\\OSGeo4W\\apps\\Python39\\Scripts\\pyrcc5.exe -o resources.py resources.qrc\nなお、PowerShell の場合、call を無くします。\nPS C:\\Users\\username> C:\\OSGeo4W\\bin\\o4w_env.bat\nPS C:\\Users\\username> C:\\OSGeo4W\\apps\\Python39\\Scripts\\pyrcc5.exe -o resources.py resources.qrc\nlinguist.exe と designer.exe は、そのままでは実行できません。C:\\OSGeo4W\\saga_gui.bat などを参考に、以下のファイルを作成します。\n\nC:\\OSGeo4W\\saga_gui.bat をコピーする\nC:\\OSGeo4W\\linguist_gui.bat という名前にする\nメモ帳で開き、二行目の ¥apps¥saga¥saga_gui.exe を ¥Qt5¥bin¥linguist.exe と書き換える\n\n同様の作業を designer についても行います。\nこれで、C:\\OSGeo4W\\linguist_gui.bat をダブルクリックすると Designer が立ち上がるようになります。"
  },
  {
    "objectID": "flow.html#流れ",
    "href": "flow.html#流れ",
    "title": "3  一連の流れ",
    "section": "3.2 流れ",
    "text": "3.2 流れ\n\n課題の発見: まずは、QGIS や各種 Plugin を試してみることです。その中で、課題を発見していきます。\n設計: どのような機能を実装したいか、どのような UI にしたいかを設計します。前半は紙に自由に書くと良いでしょう。とくに、Plugin では、UI として３つの方法が主流です。\n\nウィンドウ\nドック\nプロセシング\n\n雛形作成: Plugin Builder を使って、名称などを含んだ雛形を作ります\nresouces.py の作成: pyrcc を使います\nGitHub 登録: 必須ではありませんが、GitHub で公開することができます\nGitHub の DOI 登録\nコード記述\nGitHub にコミット\n多言語化"
  },
  {
    "objectID": "flow.html#雛形作成",
    "href": "flow.html#雛形作成",
    "title": "3  一連の流れ",
    "section": "3.3 雛形作成",
    "text": "3.3 雛形作成\nQGIS のプラグイン Plugin Builder 3 を使用します。\nバージョンのところでは、0.0.1 という表記ができません。0.1 などにして、すぐに metadata.txt を書き換えることで対応できます。\n保存先は、以下の QGIS plugin 保存先にしておくと、QGIS を立ち上げた際に読み込まれます。ただし、次の節で見るように、resouces.py が作成されていないとプラグインとして認識されません。\nmacOS: /Users/username/Library/Application Support/QGIS/QGIS3/profiles/default/python/plugins\nWindows: C:\\Users\\username\\AppData\\Roaming\\QGIS\\QGIS3\\profiles\\default\\python"
  },
  {
    "objectID": "flow.html#resouces.py-の作成",
    "href": "flow.html#resouces.py-の作成",
    "title": "3  一連の流れ",
    "section": "3.4 resouces.py の作成",
    "text": "3.4 resouces.py の作成\nMyPlugin 内に、resouces.py ファイルが作成されないことがあります。これがないと、プラグインとして認識されません。(Windows で o4w_env.bat を読み込んだ後などだと、パスが通っているので resouces.py まで作成してくれます。)\nresources.qrc があることを確認します。\nmacOS の場合\n/Applications/QGIS-LTR.app/Contents/MacOS/bin/pyrcc5 -o resources.py resources.qrc\nWindows スタンドアロン版の場合\n> call C:\\Program Files\\QGIS 3.38.2\\bin\\o4w_env.bat\n> C:\\Program Files\\apps\\Python312\\Scripts\\pyrcc5.exe -o resources.py resources.qrc\nOSGeo4W 版の場合\n> call C:\\OSGeo4W\\bin\\o4w_env.bat\n> C:\\OSGeo4W\\apps\\Python39\\Scripts\\pyrcc5.exe -o resources.py resources.qrc\nなお、PowerShell の場合、call をなしで実行します。\nPS > C:\\OSGeo4W\\bin\\o4w_env.bat\nPS > C:\\OSGeo4W\\apps\\Python39\\Scripts\\pyrcc5.exe -o resources.py resources.qrc\nこれで QGIS Plugin としては完成です。\nQGIS を立ち上げて、プラグイン > プラグインの管理とインストール から確認してみましょう。"
  },
  {
    "objectID": "designer.html#designer",
    "href": "designer.html#designer",
    "title": "4  デザイン",
    "section": "4.1 Designer",
    "text": "4.1 Designer\nQGIS のフォルダ内には、Designer というアプリケーションが入っています。\nWindows の場合、Section 3.1.2 であらかじめ作っておいた designer_gui.bat をダブルクリックします。\nWindows OSGeo4W: C:4W_gui.bat\nmacOS: /Applications/QGIS-LTR.app/Contents/MacOS/Designer.app"
  },
  {
    "objectID": "designer.html#よく使う-widget",
    "href": "designer.html#よく使う-widget",
    "title": "4  デザイン",
    "section": "4.2 よく使う Widget",
    "text": "4.2 よく使う Widget\nGUI を設計する際には、Widget という言葉をよく使います。Widget とは、ボタンやテキスト入力などのパーツのことです。\n\n4.2.1 LineEdit と TextEdit\nテキスト入力フォームには、以下のように三種類あります。\nlineEdit: 一行だけのシンプルなテキスト入力\ntextEdit: 複数行で、太字なども可能\nplainTextEdit: 複数行で、太字などのないシンプルなテキスト入力\n\n\n4.2.2 Label\nLabel は、LineEdit などと異なり、ユーザが入力するのではないテキストです。\n\n\n4.2.3 ListWidget\nList は、１列複数行で表示する表です。ListView と ListWidget がありますが、ListWidget の方が簡単に扱うことができます。\nデフォルトでは、１列ずつしか選択することができません。以下のコードで、複数行選択が可能になります。\n\nfrom qgis.PyQt.QtWidgets import QAbstractItemView\nself.dlg.myListWidget.setSelectionMode(\n    QAbstractItemView.ExtendedSelection\n)"
  },
  {
    "objectID": "designer.html#レイアウト",
    "href": "designer.html#レイアウト",
    "title": "4  デザイン",
    "section": "4.3 レイアウト",
    "text": "4.3 レイアウト\nデフォルトでは、ユーザがウィンドウを大きくしても、LineEdit などはその大きさに合わせて伸びてくれません。\n多くの場合は、Layouts の Vertical Layout と Horizontal Layout を組み合わせてレイアウトを完成させます。\nListWidget などを並べて、幅を可変にするには、Lay Out Horizontally in Splitter を使います。この Widget はデフォルトでは使えないグレーアウトの状態です。並べたい二つの ListWidget を選択した状態で、このボタンが有効になります。\n最後に、ウィンドウ全体を選択した状態で右クリックします。コンテキストメニューの一番下、Lay out > Lay Out in a Grid を選択します。"
  },
  {
    "objectID": "python.html#sec-python-folder",
    "href": "python.html#sec-python-folder",
    "title": "5  Python 環境",
    "section": "5.1 Python の位置",
    "text": "5.1 Python の位置\n\nWindows スタンドアロン\nWindows OSGeo4W C:\\OSGeo4W\\bin\\python3 または C:\\OSGeo4W\\apps\\Python312\\python3\nmacOS: /Applications/QGIS-LTR.app/Contents/MacOS/bin/python3"
  },
  {
    "objectID": "python.html#myplugin.py",
    "href": "python.html#myplugin.py",
    "title": "5  Python 環境",
    "section": "5.2 MyPlugin.py",
    "text": "5.2 MyPlugin.py\nプラグイン名を MyPlugin としたとすると、フォルダ内に MyPlugin.py という Python スクリプトができていると思います。\nここに"
  },
  {
    "objectID": "python.html#ファイル管理",
    "href": "python.html#ファイル管理",
    "title": "5  Python 環境",
    "section": "5.3 ファイル管理",
    "text": "5.3 ファイル管理\nよく使う関数 (例: getValue()) などを、MyPlugin.py から独立したファイル (例: Utils.py) に保存するときがあります。\nこの場合、MyPlugin.py の冒頭に\n\nfrom . import Utils\n\n...\n\n\nUtils.getValue()\n\nと記述することで、Utils 内の関数などが使えるようになります。"
  },
  {
    "objectID": "editor.html",
    "href": "editor.html",
    "title": "6  開発環境",
    "section": "",
    "text": "Python のソースコードを書くには、テキストエディタまたは統合開発環境があると便利です。\nQGIS の Python コンソールにも、Python ソースを書くためのエディタがあります。\n\n\n\nQGIS Python"
  },
  {
    "objectID": "m18n.html#流れ",
    "href": "m18n.html#流れ",
    "title": "7  多言語化",
    "section": "7.1 流れ",
    "text": "7.1 流れ\n\n*.ui ファイルと MyPlugin.py などにメッセージを self.tr(‘Sample text’) などと記述\npylupdate で、Python スクリプト内の翻訳すべき言語を抽出 (MyPlugin.pro を作成)\nLinguist で MyPlugin_ja.ts ファイルを編集しリリース (MyPlugin_ja.ts が作成される)"
  },
  {
    "objectID": "m18n.html#sec-m18n-folder",
    "href": "m18n.html#sec-m18n-folder",
    "title": "7  多言語化",
    "section": "7.2 多言語化のフォルダ",
    "text": "7.2 多言語化のフォルダ\nMyPlugin フォルダ内に、i18n というフォルダがあります。\ni18n フォルダ内には、af.ts というファイルがありますが、これはサンプルです。実際には不要なので、削除しましょう。"
  },
  {
    "objectID": "m18n.html#pro-ファイルを作る",
    "href": "m18n.html#pro-ファイルを作る",
    "title": "7  多言語化",
    "section": "7.3 .pro ファイルを作る",
    "text": "7.3 .pro ファイルを作る\nテキストエディタで、i18n フォルダ内に MyPlugin.pro というファイル名でファイルを作成します。\n中身は以下の通りです。適宜、自分のファイル名に合わせてください。\nFORMS = ../ MyPlugin_dialog_base.ui\nSOURCES = ../ MyPlugin_dialog.py ../MyPlugin.py ../MyPluginUtils.py\nTRANSLATIONS =  MyPlugin_ja.ts\nまた、Window から Dock に変えるなど、上記の中身に大きな変更が発生した場合も、.pro ファイルを作り直す必要があります。"
  },
  {
    "objectID": "m18n.html#ts-ファイルを作る",
    "href": "m18n.html#ts-ファイルを作る",
    "title": "7  多言語化",
    "section": "7.4 .ts ファイルを作る",
    "text": "7.4 .ts ファイルを作る\n次に、MyPlugin_ja.ts ファイルを作ります。これには、pylupdate という Python スクリプトが必要です。\n場所がわからない場合は、Section 5.1 を参照。\nmacOS: /Applications/QGIS-LTR.app/Contents/MacOS/bin/pylupdate5\nWindows の場合はコンソールなどで以下のように入力します。\nmacOS の QGIS は、/Applications/QGIS-LTR.app/Contents/MacOS/bin/pylupdate5 が入っていますが、そのままでは使うことができません。一行目を以下のように書き換えましょう。\n#!/Applications/QGIS-LTR.app/Contents/MacOS/QGIS\nを\n#!/Applications/QGIS-LTR.app/Contents/MacOS/bin/python3\nと書き換えます。\n#| eval: FALSE\ncd /path/to/MyPlugin\n/Applications/QGIS-LTR.app/Contents/MacOS/bin/pylupdate5 -noobsolete i18n/jpdata.pro\nこれで、i18n フォルダ内に MyPlugin_ja.ts が作成されます。すでにある場合は、更新されます。"
  },
  {
    "objectID": "m18n.html#linguist",
    "href": "m18n.html#linguist",
    "title": "7  多言語化",
    "section": "7.5 Linguist",
    "text": "7.5 Linguist\ni18n フォルダ内の MyPlugin_ja.ts ファイルを、Linguist で開きます。\nmacOS: /Applications/QGIS-LTR.app/Contents/Resources/python/site-packages/qt5_applications/Qt/bin/Linguist.app\nWindows OSGeo4W インストールの場合\n#| eval: FALSE\nC:\\OSGeo4W\\bin\\python3\nmacOS の場合 (QGIS-LTR.app は、名前が異なる場合があります。)\n#| eval: FALSE\nopen /Applications/QGIS-LTR.app/Contents/Resources/python/site-packages/qt5_applications/Qt/bin/Linguist.app"
  }
]